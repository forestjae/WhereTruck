# WhereTruck 

# 1. 로딩/로그인/회원가입 부

**(참고) 회원가입 프로세스**

 1. 소셜로그인 시 소셜로그인 서버에서 acccess token 발급

 2.해당 token을 앱 서버에 송신하여, 앱 서버는 소셜로그인 서버에서 userToken 수신 → 별도 암호화 로직을 거쳐 JWT토큰 발급

 3.앱에서는 JWT토큰을 저장하게 되고, 로그인 시도 시에는 서버에 JWT토큰을 송신 → 서버에서 JWT토큰을 가지고 정합성 검증 → 로그인 승인 → 로그인정보 앱으로 송신

 

## 1.1 로고 뷰(초기화면)

### 기능구현

1. 앱 실행시 항상 실행(백그라운드 동작 중 제외)
2. userInfo를 userDefault(로컬)에 저장하여 자동로그인 기능 구현                                                                                                                                                               
    
    *user default로 앱 실행 시 정합성 검증 방법 고민 필요
    
3. userDefault 저장된 내용이 없을 경우 로그인 뷰 진입
4. 비동기처리로 내부계산 완료 전까지 로고 띄우기
5. 로고 애니메이션 구현 - Lottie 라이브러리 사용

### API 통신

- 앱에 저장된 JWT token Get하여 서버 호출하여 회원 여부 판별

    1) 토큰이 있고 앱서비스의 회원이면 → 2.1 메인 뷰 진입

    2) 토큰은 있으나 아직 앱 서비스의 회원이 아니면 → 1.3 회원가입뷰 진입

    3) token이 없거나 정합성 검증 실패  → 1.2 로그인 뷰 진입    

---

## 1.2 로그인 뷰

### 기능구현

1. 카카오, 애플 2종 소셜 로그인 구현
2. 회원/비회원 여부 판단 기능 
3. 회원일경우 nickname, role 등 회원정보 앱에 저장(싱글턴 클래스)
4. 비회원일 경우 회원가입 화면 진입

### API 통신

- 카카오 / 애플 로그인 시도 → UUID 획득 → UUID로 서버 API - USER/Me 호출하여 가입여부 판별 및 JWT Token 발급

    1) 앱서비스의 회원이면 → 2.1 메인 뷰 진입

    2) 아직 앱 서비스의 회원이 아니면 → 1.3 회원가입뷰 진입    

## 회원가입 화면

### 기능구현

1. 닉네임(TextField) 및 롤(Segemented Cotrol) 입력부 구현
2. 회원가입 버튼 구현 
3. 입력값 검증 필요 - 닉네임 길이 제한 , 욕설 필터링 기능? 

### API통신

- 닉네임 중복 확인
- 서버 API - User Save / Put / Parameter = Nickname , Role

---

# 2. 기능부(탭뷰)

## 2-1. 지도 탭 (메인뷰)

## 2.1.1 지도 뷰

### 기능구현

1. 주소검색창 
2. 네이버 지도 api 사용
3. 푸드트럭 위치 선택 (only for seller) 
4. 푸드트럭 재검색 버튼 (반경 설정 : 5-10-20Km)
5. 푸드트럭 허가구역표시
6. 영업 중 트럭 표시(네이버 지도 마커 활용)
7. 지도 위 트럭 클릭 → 상세 트럭 정보 호출

### API 통신

- 지도상 위치 정보(위경도) → 주소로 변환 **(Naver Reverse Geocode)**
- 트럭 장사 시작 → set Truck Operation State = Opened
- 지도 중심 위치 기준 반경 [설정값]Km 내 Opened상태의 트럭 검색 결과 지도위에 표기

---

## 2.1.2 검색어 기반 검색

### 기능구현

1. 로컬 검색결과 표시 (최대 20개)
2. 검색 결과 클릭 시 해당 위치로 지도중심 변경 / 트럭 재검색 실행

### API통신

- 검색어 기준 로컬 검색결과 수신 (카카오 로컬 검색 API)

---

## 2.1.3 트럭 상세보기

### 기능구현

1. 

---

## 2.2. 트럭 리스트 탭

### 2.2.1 트럭 리스트 화면

## 기능구현

1. 2.1.1지도 뷰 에 표현된 트럭 테이블 뷰로 보여주기

---

## 2-3. 내가 찜한 트럭 탭

### 2.3.1. 내가찜한트럭 화면

### 기능구현

1. 내가 찜한 트럭 테이블 뷰로 보여주기
2. 찜 취소, 다시 찜하는 기능

### API 통신

- favorite/me 호출하여 get truck list

---

## 2.4. 관리 탭

### 2.4.1 메인 관리화면

### 2.4.2. 개인정보 관리

### 2.4.3 트럭 관리 화면

### 2.4.4 메뉴 관리 화면
